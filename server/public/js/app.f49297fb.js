(function(e){function t(t){for(var n,o,i=t[0],l=t[1],u=t[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);c&&c(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var l=r[i];0!==a[l]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},s=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("navigation-bar"),r("div",{staticClass:"container vh-75"},[r("router-view")],1)],1)},s=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mb-4 shadow-sm"},[r("b-navbar",{staticClass:"navbar"},[r("h2",[e._v("Voice Activated Fitness")]),r("b-collapse",{attrs:{"is-nav":""}},[r("b-navbar-nav",{staticClass:"ml-auto"},[r("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[e._v(" "+e._s(e.username)+" ")]},proxy:!0}])},[r("b-dropdown-item",[e._v("Sign out")])],1)],1)],1)],1),r("div",{staticClass:"navbar-links"},[r("router-link",{staticClass:"ml-1 mr-3 align-self-center",attrs:{to:"/"}},[e._v("Dashboard")]),r("router-link",{staticClass:"ml-1 mr-3 align-self-center",attrs:{to:{name:"Completed Workouts"}}},[e._v("Completed Workouts")])],1)],1)},i=[],l=r("1da1"),u=(r("96cf"),r("2f62"));n["default"].use(u["a"]);var c=new u["a"].Store({state:{user:null,token:""},mutations:{setUser:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.user=t.user,e.token=t.token;case 2:case"end":return r.stop()}}),r)})))()}},actions:{setUser:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.commit,n("setUser",t);case 2:case"end":return r.stop()}}),r)})))()}},getters:{user:function(e){return e.user},accessToken:function(e){return e.token}}}),d=n["default"].extend({name:"NavigationBar",computed:{username:function(){var e,t;return null!==(e=null===(t=c.getters.user)||void 0===t?void 0:t.email)&&void 0!==e?e:""}}}),m=d,p=r("2877"),f=Object(p["a"])(m,o,i,!1,null,null,null),h=f.exports,b={components:{NavigationBar:h}},v=b,k=Object(p["a"])(v,a,s,!1,null,null,null),y=k.exports,g=(r("ac1f"),r("1276"),r("8c4f")),w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Title",{attrs:{title:"Dashboard",type:"Page"}}),r("div",{staticClass:"d-flex"},[r("b-card",{staticClass:"w-75 mr-3"},[r("Title",{attrs:{title:"Workout Frequency",type:"Subtitle"}}),this.$data.workouts?r("workout-frequency-calendar",{attrs:{workouts:this.$data.workouts}}):e._e()],1),r("b-card",{staticClass:"w-50"},[r("Title",{attrs:{title:"Recently Completed Workouts",type:"Subtitle"}}),e._l(this.$data.workouts,(function(e,t){return r("div",{key:e[0].completedDate},[t<=5?void 0:r("recently-completed-workout",{attrs:{"workout-name":e[0].Workout.name,"completed-date":e[0].completedDate}})],2)}))],2)],1)],1)},x=[],_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",["Page"===e.type?r("h2",{staticClass:"mb-3"},[e._v(e._s(e.title))]):r("h4",{staticClass:"mb-2"},[e._v(e._s(e.title))])])},C=[],D=n["default"].extend({name:"Title",props:{type:{type:String,validator:e=>["Page","Subtitle"].some(t=>t==e),required:!0},title:{type:String,required:!0}}}),O=D,S=Object(p["a"])(O,_,C,!1,null,null,null),j=S.exports,W=r("d4ec"),E=r("bee2"),$=(r("d9e2"),r("b0c0"),r("99af"),r("bc3a")),R=r.n($),T=r("5a0c"),P=r.n(T);function F(e){return P()(e).format("ddd D MMM YYYY @ H:mm")}function U(e){this.$bvToast.toast(e,{title:"Error",variant:"danger",solid:!0})}R.a.interceptors.response.use((function(e){return e}),(function(e){throw Error(e.response.data)}));var q=function(){function e(){Object(W["a"])(this,e),this.baseUrl="https://fyp-voice-activated-fitness.herokuapp.com/v1"}return Object(E["a"])(e,[{key:"getUser",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("https://api.amazon.com/user/profile?access_token=".concat(t)).then((function(e){var r={email:e.data.email,name:e.data.name};c.dispatch("setUser",{token:t,user:r})})).catch((function(e){return U(e.message)}));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"authenticate",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.location.href="".concat(this.baseUrl,"/auth/login");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAllWorkoutStatistics",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("".concat(this.baseUrl,"/statistic/"),{withCredentials:!0}).catch((function(e){return U(e.message)}));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getWorkoutStatistics",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("".concat(this.baseUrl,"/statistic/").concat(t),{withCredentials:!0}).catch((function(e){return U(e.message)}));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),M=new q,N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("vc-calendar",{attrs:{"is-expanded":"",attributes:e.attributes},on:{dayclick:e.click}})],1)},A=[],z=(r("d81d"),r("b64b"),n["default"].extend({name:"WorkoutFrequencyCalendar",props:{workouts:{type:Object,required:!0}},data:function(){return{attributes:[]}},methods:{formatAttributes:function(){var e=this;this.$data.attributes=Object.keys(this.workouts).map((function(t){return{bar:e.randomiseColour(),dates:new Date(t),popover:{label:e.workouts[t][0].Workout.name}}}))},randomiseColour:function(){var e=["gray","red","orange","yellow","green","teal","blue","indigo","purple","pink"];return e[Math.floor(Math.random()*e.length)]},click:function(e){console.log(e)}},created:function(){this.formatAttributes()}})),H=z,I=Object(p["a"])(H,N,A,!1,null,null,null),V=I.exports,Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex border p-2 mb-2"},[r("div",{staticClass:"m-auto"},[e._v(e._s(e.workoutName)+" on "+e._s(e.formatDate(e.completedDate)))]),r("div",{staticClass:"ml-auto"},[r("b-button",{attrs:{variant:"primary",to:{name:"Workout Statistics",params:{date:e.completedDate}}}},[e._v("View Details")])],1)])},B=[],L=n["default"].extend({name:"RecentlyCompletedWorkout",props:{workoutName:{type:String,required:!0,default:""},completedDate:{type:String,required:!0}},methods:{formatDate:F}}),J=L,G=Object(p["a"])(J,Y,B,!1,null,null,null),K=G.exports,Q=n["default"].extend({name:"Dashboard",components:{Title:j,WorkoutFrequencyCalendar:V,RecentlyCompletedWorkout:K},data:function(){return{workouts:null}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,M.getAllWorkoutStatistics();case 2:e.$data.workouts=t.sent;case 3:case"end":return t.stop()}}),t)})))()}}),X=Q,Z=Object(p["a"])(X,w,x,!1,null,null,null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[e._v("error")])},re=[],ne=n["default"].extend({name:"Error"}),ae=ne,se=Object(p["a"])(ae,te,re,!1,null,null,null),oe=se.exports,ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Title",{attrs:{title:"Completed Workouts",type:"Page"}}),r("b-table",{attrs:{fields:e.tableHeaders,items:e.filteredItems,"show-empty":"","empty-text":"No workouts could be found."},scopedSlots:e._u([{key:"head(name)",fn:function(t){return[e._v(" "+e._s(t.label)+" "),r("b-input",{staticClass:"mt-2",attrs:{id:"nameFilter",size:"sm",placeholder:"Name..."},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})]}},{key:"head(numberOfExercisesCompleted)",fn:function(t){return[e._v(" "+e._s(t.label)+" "),r("b-input",{staticClass:"mt-2",attrs:{id:"numberOfExercisesCompletedFilter",type:"number",min:"0",oninput:"validity.valid||(value='');",size:"sm",placeholder:"Exercises completed..."},model:{value:e.filters.exercisesCompleted,callback:function(t){e.$set(e.filters,"exercisesCompleted",t)},expression:"filters.exercisesCompleted"}})]}},{key:"head(completedDate)",fn:function(t){return[e._v(" "+e._s(t.label)+" "),r("date-picker",{attrs:{id:"dateCompletedFilter",mode:"date","model-config":e.config},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.inputValue,a=t.inputEvents;return[r("b-input",e._g({staticClass:"mt-2",attrs:{value:n,size:"sm",placeholder:"Completed Date..."}},a))]}}],null,!0),model:{value:e.filters.completedDate,callback:function(t){e.$set(e.filters,"completedDate",t)},expression:"filters.completedDate"}})]}},{key:"head(actions)",fn:function(t){return[r("div",{staticClass:"d-flex flex-column"},[e._v(" "+e._s(t.label)+" "),r("b-button",{staticClass:"mt-3 text-left p-0 font-weight-normal",attrs:{variant:"link"},on:{click:e.resetFilters}},[e._v("Reset filters")])],1)]}},{key:"cell(completedDate)",fn:function(t){return[e._v(" "+e._s(e.formatDate(t.item.completedDate))+" ")]}},{key:"cell(actions)",fn:function(t){return[r("b-link",{attrs:{to:{name:"Workout Statistics",params:{date:t.item.completedDate}}}},[e._v("View Details")])]}}])})],1)},le=[],ue=(r("4de4"),r("d3b7"),r("caad"),r("2532"),r("5887")),ce=r.n(ue),de=n["default"].extend({name:"CompletedWorkouts.vue",components:{Title:j,DatePicker:ue["DatePicker"]},data:function(){return{workouts:[],filters:{name:"",exercisesCompleted:"",completedDate:""},config:{type:"string",mask:"iso"}}},methods:{formatDate:F,resetFilters:function(){this.filters.name="",this.filters.exercisesCompleted="",this.filters.completedDate=""}},computed:{tableHeaders:function(){return[{key:"name",sortable:!0},{key:"completedDate",sortable:!0},{key:"numberOfExercisesCompleted",sortable:!0},{key:"actions",sortable:!1}]},filteredItems:function(){var e=this;return this.$data.workouts.filter((function(t){return t.name.includes(e.filters.name)&&t.completedDate.split("T")[0].includes(e.filters.completedDate.split("T")[0])&&(""===e.filters.exercisesCompleted||e.filters.exercisesCompleted===t.numberOfExercisesCompleted)}))}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,M.getAllWorkoutStatistics();case 2:for(n in r=t.sent,r)a=r[n][0],e.$data.workouts.push({name:a.Workout.name,completedDate:a.completedDate,numberOfExercisesCompleted:r[n].length});case 4:case"end":return t.stop()}}),t)})))()}}),me=de,pe=Object(p["a"])(me,ie,le,!1,null,null,null),fe=pe.exports,he=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.statistics?r("div",[r("Title",{attrs:{title:e.title,type:"Page"}}),r("b-button",{staticClass:"w-25",attrs:{to:{name:"Completed Workouts"},variant:"primary"}},[e._v("Back")]),r("div",{staticClass:"d-flex mt-3"},[r("b-card",{staticClass:"mr-2"},[r("Title",{attrs:{title:"Workout Details",type:"Subtitle"}}),r("ul",{staticClass:"list-unstyled"},[r("li",[e._v("Date Completed: "+e._s(e.completedDate))]),r("li",[e._v("Total Sets Completed: "+e._s(e.totalSetsCompleted))]),r("li",[e._v("Total Reps Completed: "+e._s(e.totalRepsCompleted))]),r("li",[e._v("Total Weight Lifted: "+e._s(e.totalWeightLifted)+"kg")])])],1),r("b-card",{staticClass:"ml-2 w-75"},[r("Title",{attrs:{title:"Exercises Performed",type:"Subtitle"}}),r("b-table",{attrs:{fields:e.tableHeaders,items:e.filteredItems,"show-empty":"","empty-text":"No statistics could be found."},scopedSlots:e._u([{key:"head(Exercise.name)",fn:function(){return[e._v(" Exercise Name "),r("b-input",{staticClass:"mt-2",attrs:{id:"nameFilter",size:"sm",placeholder:"Exercise Name..."},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})]},proxy:!0}],null,!1,4078098647)})],1)],1)],1):e._e()},be=[],ve=n["default"].extend({name:"WorkoutStatistics.vue",components:{Title:j},data(){return{statistics:null,filters:{name:""}}},computed:{tableHeaders(){return[{key:"Exercise.name",sortable:!0},{key:"set",sortable:!0},{key:"reps",sortable:!0},{key:"time",sortable:!0},{key:"weight",sortable:!0}]},filteredItems(){return this.$data.statistics.filter(e=>e.Exercise.name.includes(this.filters.name))},totalWeightLifted(){return this.statistics.map(e=>e.weight).reduce((e,t)=>e+t,0)},totalRepsCompleted(){return this.statistics.map(e=>e.reps).reduce((e,t)=>e+t,0)},totalSetsCompleted(){return this.statistics.map(e=>null!==e.reps).length},completedDate(){return F(this.statistics[0].completedDate)},title(){return`Statistics for ${this.statistics[0].Workout.name} completed on ${F(this.statistics[0].completedDate)}`}},methods:{formatDate:F},async mounted(){this.$route.params.date||await this.$router.push("Error"),this.statistics=await M.getWorkoutStatistics(this.$route.params.date)}}),ke=ve,ye=Object(p["a"])(ke,he,be,!1,null,null,null),ge=ye.exports;n["default"].use(g["a"]);var we=[{path:"/",name:"Dashboard",component:ee},{path:"/completed-workouts",name:"Completed Workouts",component:fe},{path:"/:date/statistics",name:"Workout Statistics",component:ge},{path:"/error",name:"Error",component:oe},{path:"*",redirect:"/error"}],xe=new g["a"]({mode:"history",base:"/",routes:we});xe.beforeEach(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""===document.cookie){e.next=12;break}return a=document.cookie.split("=")[1],e.next=4,M.getUser(a);case 4:if(null===c.getters["user"]){e.next=8;break}n(),e.next=10;break;case 8:return e.next=10,M.authenticate();case 10:e.next=14;break;case 12:return e.next=14,M.authenticate();case 14:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}());var _e=xe,Ce=r("5f5b");r("fce9");n["default"].config.productionTip=!1,n["default"].use(Ce["a"]),n["default"].use(ce.a,{componentPrefix:"vc"}),new n["default"]({router:_e,store:c,render:function(e){return e(y)}}).$mount("#app")},fce9:function(e,t,r){}});
//# sourceMappingURL=app.f49297fb.js.map